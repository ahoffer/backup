#! /bin/bash
# Example
# sudo gojava 11
# sudo gojava 17

JAVA_VER=$1

re='^[0-9]+$'
if ! [[ $JAVA_VER =~ $re ]]; then
  echo "$JAVA_VER is not a number. Use a java version like "11" or "17" " >&2
  exit 1
fi

echo "Switching to Java version $JAVA_VER"
JAVA_TARGET=$(update-alternatives --list java | grep "\-$JAVA_VER")
JAVAC_TARGET=$(update-alternatives --list javac | grep "\-$JAVA_VER")
echo Found java=$JAVA_TARGET
echo Found javac=$JAVAC_TARGET
echo Updating java...
sudo update-alternatives --set java "$JAVA_TARGET"
echo Updating javac...
sudo update-alternatives --set javac "$JAVAC_TARGET"
jhome=$(dirname "$(dirname "$JAVA_TARGET")")
echo "export JAVA_HOME=$jhome" >javahome
echo 'source javahome' to set JAVA_HOME=$jhome

